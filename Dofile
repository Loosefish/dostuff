#!/bin/sh

do_() {
	echo "[default]"
}

do_valgrind() {
	valgrind --error-exitcode=10 ./dostuff -f 2>/dev/null >/dev/null || echo "errors"
	valgrind --error-exitcode=10 ./dostuff -p 2>/dev/null >/dev/null || echo "errors"

	valgrind --error-exitcode=10 ./dostuff 2>/dev/null >/dev/null || echo "errors"
	valgrind --error-exitcode=10 ./dostuff normal 2>/dev/null >/dev/null || echo "errors"
	valgrind --error-exitcode=10 ./dostuff args 100 200 300 ABC 2>/dev/null >/dev/null || echo "errors"

	cp Dofile ../Dorec

	DOFILE="Dorec" valgrind --error-exitcode=10 ./dostuff 2>/dev/null >/dev/null || echo "errors"
	DOFILE="Dorec" valgrind --error-exitcode=10 ./dostuff normal 2>/dev/null >/dev/null || echo "errors"
	DOFILE="Dorec" valgrind --error-exitcode=10 ./dostuff args 100 200 300 ABC 2>/dev/null >/dev/null || echo "errors"

	rm ../Dorec
}


do_normal() {
	pwd
	ls|wc -l
}


do_args() {
	pwd
	echo "$@"
}
